<div class="container-fluid d-flex justify-content-center align-items-center">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-register row">
    <h3 class="text-center mb-4">Crear Cuenta</h3>
    
    <!-- Nombre -->
    <div class="col-md-6 mb-3">
      <label for="firstName" class="form-label">Nombre</label>
      <input 
        type="text" 
        id="firstName" 
        formControlName="firstName" 
        class="form-control" 
        [ngClass]="onValidate('firstName')" 
      />
      <div class="invalid-feedback">{{showError('firstName')}}</div>
    </div>

    <!-- Apellido -->
    <div class="col-md-6 mb-3">
      <label for="lastName" class="form-label">Apellido</label>
      <input 
        type="text" 
        id="lastName" 
        formControlName="lastName" 
        class="form-control" 
        [ngClass]="onValidate('lastName')"
      />
      <div class="invalid-feedback">{{showError('lastName')}}</div>
    </div>

    <!-- Email -->
    <div class="col-md-6 mb-3">
      <label for="email" class="form-label">E-mail</label>
      <input 
        type="email" 
        id="email" 
        formControlName="email" 
        class="form-control" 
        [ngClass]="onValidate('email')" 
      />
      <div class="invalid-feedback">{{showError('email')}}</div>
    </div>

    <!-- Username -->
    <div class="col-md-6 mb-3">
      <label for="username" class="form-label">Usuario</label>
      <input 
        type="text" 
        id="username" 
        formControlName="username" 
        class="form-control" 
        [ngClass]="onValidate('username')" 
      />
      <div class="invalid-feedback">{{showError('username')}}</div>
    </div>

    <!-- Localidad -->
    <div class="col-12 mb-3">
      <label for="locationId" class="form-label">Localidad</label>
      <ng-select
        formControlName="locationId"
        id="locationId"
        placeholder="Selecciona tu localidad"
        bindLabel="description"
        bindValue="id"
        [items]="locations"
        [loading]="loadingLocations"
        [clearable]="false"
        [searchable]="true"
        [ngClass]="onValidate('locationId')"
        class="custom-ng-select"
      >
        <ng-option *ngFor="let location of locations" [value]="location.id">
          {{location.description}}
        </ng-option>
      </ng-select>
      <div class="invalid-feedback d-block" *ngIf="form.get('locationId')?.invalid && (form.get('locationId')?.dirty || form.get('locationId')?.touched)">
        {{showError('locationId')}}
      </div>
    </div>

    <!-- Password -->
    <div class="col-md-6 mb-3">
      <label for="password" class="form-label">Contraseña</label>
      <input 
        type="password" 
        id="password" 
        formControlName="password" 
        class="form-control" 
        [ngClass]="onValidate('password')" 
      />
      <div class="invalid-feedback">{{showError('password')}}</div>
    </div>

    <!-- Confirmar Password -->
    <div class="col-md-6 mb-3">
      <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
      <input 
        type="password" 
        id="confirmPassword" 
        formControlName="confirmPassword" 
        class="form-control" 
        [ngClass]="onValidate('confirmPassword')" 
      />
      <div class="invalid-feedback">{{showError('confirmPassword')}}</div>
    </div>

    <!-- Términos y Condiciones -->
    <div class="col-12 mb-3">
      <div class="form-check">
        <input
          type="checkbox"
          id="acceptTerms"
          formControlName="acceptTerms"
          class="form-check-input"
          [ngClass]="onValidate('acceptTerms')"
        />
        <label for="acceptTerms" class="form-check-label">
          Acepto los 
          <button
            type="button"
            class="btn btn-link p-0 text-decoration-underline"
            (click)="showTermsAndConditions()"
            style="vertical-align: baseline; font-size: inherit;"
          >
            términos y condiciones
          </button>
        </label>
      </div>
      <div class="invalid-feedback d-block" *ngIf="form.get('acceptTerms')?.invalid && (form.get('acceptTerms')?.dirty || form.get('acceptTerms')?.touched)">
        {{showError('acceptTerms')}}
      </div>
    </div>

    <!-- Botones -->
    <div class="col-12 mb">
      <button type="submit" class="btn btn-primary w-100" [disabled]="form.invalid">
        Registrar
      </button>
    </div>

    <div class="col-12">
      <button type="button" class="btn btn-light w-100 mt-2" [routerLink]="'/login'">
        ¿Ya tienes cuenta? Inicia sesión
      </button>
    </div>
  </form>
</div>